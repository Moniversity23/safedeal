<!DOCTYPE html>

<html>
<head>
<title>User Management - SAFEDEAL CONTRIBUTION</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#3498db">
<link rel="icon" href="/images/safedeallogo.png" type="image/png">
<!-- Using the original simpler style.css link -->
<link rel="stylesheet" href="/style.css">
<!-- Optional: Add Font Awesome for icons if available in your system -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<!-- Simple container structure -->
<div class="container">
<h1>User Management (Admin)</h1>
<a href="/">← Back to Admin Dashboard</a>
<hr>

    <h2>Add New User</h2>
    <!-- Form is wrapped in a standard structure for simplicity -->
    <form action="/users/add" method="post" style="display: grid; gap: 15px; grid-template-columns: 1fr 1fr;">
        
        <div class="form-group" style="grid-column: 1 / span 2;">
            <label for="fullName">Full Name:</label>
            <input type="text" id="fullName" name="fullName" placeholder="e.g., John Doe" required>
        </div>

        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" placeholder="e.g., johndoe123" required>
        </div>

        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" placeholder="Enter password" required>
        </div>

        <div class="form-group">
            <label for="role">Role:</label>
            <select id="role" name="role" required>
                <option value="">Select Role</option>
                <option value="LoanOfficer">Loan Officer</option>
                <option value="Borrower">Borrower</option>
            </select>
        </div>

    
        <!-- Account Details Section (Visible only for Loan Officer) -->
        <div class="form-group account-section" id="accountGroup" style="display: none; grid-column: 1 / span 2; border: 1px dashed #ccc; padding: 15px;">
            <h4 style="margin-bottom: 10px; color: #3498db;">Loan Officer Payment Details (Required)</h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                <div>
                    <label for="bankName">Bank Name:</label>
                    <input type="text" id="bankName" name="bankName" placeholder="e.g., Zenith Bank">
                </div>
                <div>
                    <label for="accountName">Account Name:</label>
                    <input type="text" id="accountName" name="accountName" placeholder="e.g., Venus Nwaogaraku">
                </div>
                <div>
                    <label for="accountNumber">Account Number:</label>
                    <input type="text" id="accountNumber" name="accountNumber" placeholder="e.g., 1234567890">
                </div>
            </div>
        </div>

        <button type="submit" class="btn-primary" style="grid-column: 1 / span 2; margin-top: 10px;">Add User ➕</button>
    </form>

    <h2 style="margin-top: 3rem;">Existing Users</h2>
    <div class="table-wrapper" style="overflow-x: auto;">
        <table class="data-table" style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Full Name</th>
                    <th>Role</th>
                    <th>Assigned Officer</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach(user => { %>
                    <tr>
                        <td><%= user.username %></td>
                        <td><%= user.fullName %></td>
                        <td><span class="role-badge"><%= user.role %></span></td>
                        <!-- Display the assigned officer name if available and is a Borrower -->
                        <td>
                            <% if (user.role === 'Borrower' && user.assignedOfficerName) { %>
                                <%= user.assignedOfficerName %>
                            <% } else { %>
                                N/A
                            <% } %>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
</div>

<script src="/js/user-manage.js"></script>


</body>
</html>